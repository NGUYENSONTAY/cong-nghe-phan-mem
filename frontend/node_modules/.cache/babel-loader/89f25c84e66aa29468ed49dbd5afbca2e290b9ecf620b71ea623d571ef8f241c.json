{"ast":null,"code":"var _jsxFileName = \"/home/diengb/bansach/bookstore/frontend/src/components/books/FilterSidebar.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { categoryAPI } from '../../api/categoryAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilterSidebar = ({\n  onFilterChange,\n  initialFilters\n}) => {\n  _s();\n  const [filters, setFilters] = useState(initialFilters);\n  const [minPrice, setMinPrice] = useState(initialFilters.minPrice || '');\n  const [maxPrice, setMaxPrice] = useState(initialFilters.maxPrice || '');\n  const {\n    data: categories = [],\n    isLoading: isLoadingCategories\n  } = useQuery('categories', categoryAPI.getAllCategories);\n  const handleFilterChange = (key, value) => {\n    // Create a copy of the current filters\n    const newFilters = {\n      ...filters\n    };\n\n    // If the value is empty, remove the key from the filter\n    if (value === '' || value === null || value === undefined) {\n      delete newFilters[key];\n    } else {\n      newFilters[key] = value;\n    }\n\n    // Reset page to 1 when filters change\n    newFilters.page = 1;\n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n  const handlePriceChange = () => {\n    let newFilters = {\n      ...filters,\n      page: 1\n    };\n    if (minPrice) newFilters.minPrice = minPrice;else delete newFilters.minPrice;\n    if (maxPrice) newFilters.maxPrice = maxPrice;else delete newFilters.maxPrice;\n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n  const clearFilters = () => {\n    const clearedFilters = {};\n    setFilters(clearedFilters);\n    setMinPrice('');\n    setMaxPrice('');\n    onFilterChange(clearedFilters);\n  };\n  return /*#__PURE__*/_jsxDEV(\"aside\", {\n    className: \"w-full lg:w-64 xl:w-72 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white rounded-lg shadow-sm border\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold mb-3\",\n        children: \"Danh m\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), isLoadingCategories ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 32\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2 max-h-60 overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center space-x-2 cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"category\",\n              value: \"\",\n              checked: !filters.category,\n              onChange: () => handleFilterChange('category', ''),\n              className: \"radio radio-primary radio-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"T\\u1EA5t c\\u1EA3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center space-x-2 cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"category\",\n              value: category._id,\n              checked: filters.category === category._id,\n              onChange: () => handleFilterChange('category', category._id),\n              className: \"radio radio-primary radio-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: category.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this)\n        }, category._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white rounded-lg shadow-sm border\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold mb-3\",\n        children: \"Gi\\xE1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"T\\u1EEB\",\n          value: minPrice,\n          onChange: e => setMinPrice(e.target.value),\n          className: \"input input-bordered w-full input-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"\\u0110\\u1EBFn\",\n          value: maxPrice,\n          onChange: e => setMaxPrice(e.target.value),\n          className: \"input input-bordered w-full input-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePriceChange,\n        className: \"btn btn-sm btn-outline w-full mt-3\",\n        children: \"\\xC1p d\\u1EE5ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: clearFilters,\n      className: \"btn btn-outline btn-sm w-full\",\n      children: \"X\\xF3a b\\u1ED9 l\\u1ECDc\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(FilterSidebar, \"QivERN9xoB1SeB1kvv8NZaGiutk=\", false, function () {\n  return [useQuery];\n});\n_c = FilterSidebar;\nexport default FilterSidebar;\nvar _c;\n$RefreshReg$(_c, \"FilterSidebar\");","map":{"version":3,"names":["React","useState","useQuery","categoryAPI","jsxDEV","_jsxDEV","FilterSidebar","onFilterChange","initialFilters","_s","filters","setFilters","minPrice","setMinPrice","maxPrice","setMaxPrice","data","categories","isLoading","isLoadingCategories","getAllCategories","handleFilterChange","key","value","newFilters","undefined","page","handlePriceChange","clearFilters","clearedFilters","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","name","checked","category","onChange","map","_id","placeholder","e","target","onClick","_c","$RefreshReg$"],"sources":["/home/diengb/bansach/bookstore/frontend/src/components/books/FilterSidebar.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { categoryAPI } from '../../api/categoryAPI';\nimport { Category } from '../../types';\n\ninterface FilterSidebarProps {\n  onFilterChange: (filters: any) => void;\n  initialFilters: any;\n}\n\nconst FilterSidebar: React.FC<FilterSidebarProps> = ({ onFilterChange, initialFilters }) => {\n  const [filters, setFilters] = useState(initialFilters);\n  const [minPrice, setMinPrice] = useState(initialFilters.minPrice || '');\n  const [maxPrice, setMaxPrice] = useState(initialFilters.maxPrice || '');\n\n  const { data: categories = [], isLoading: isLoadingCategories } = useQuery('categories', categoryAPI.getAllCategories);\n\n  const handleFilterChange = (key: string, value: any) => {\n    // Create a copy of the current filters\n    const newFilters = { ...filters };\n\n    // If the value is empty, remove the key from the filter\n    if (value === '' || value === null || value === undefined) {\n      delete newFilters[key];\n    } else {\n      newFilters[key] = value;\n    }\n    \n    // Reset page to 1 when filters change\n    newFilters.page = 1;\n    \n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n\n  const handlePriceChange = () => {\n    let newFilters = { ...filters, page: 1 };\n    \n    if (minPrice) newFilters.minPrice = minPrice; else delete newFilters.minPrice;\n    if (maxPrice) newFilters.maxPrice = maxPrice; else delete newFilters.maxPrice;\n    \n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n  \n  const clearFilters = () => {\n    const clearedFilters = {};\n    setFilters(clearedFilters);\n    setMinPrice('');\n    setMaxPrice('');\n    onFilterChange(clearedFilters);\n  };\n\n  return (\n    <aside className=\"w-full lg:w-64 xl:w-72 space-y-6\">\n      {/* Search by Title is handled in BooksPage directly, so it can be removed from here */}\n\n      {/* Categories */}\n      <div className=\"p-4 bg-white rounded-lg shadow-sm border\">\n        <h3 className=\"font-semibold mb-3\">Danh mục</h3>\n        {isLoadingCategories ? <p>Đang tải...</p> : (\n          <ul className=\"space-y-2 max-h-60 overflow-y-auto\">\n            <li>\n              <label className=\"flex items-center space-x-2 cursor-pointer\">\n                <input\n                  type=\"radio\"\n                  name=\"category\"\n                  value=\"\"\n                  checked={!filters.category}\n                  onChange={() => handleFilterChange('category', '')}\n                  className=\"radio radio-primary radio-sm\"\n                />\n                <span>Tất cả</span>\n              </label>\n            </li>\n            {categories.map((category: Category) => (\n              <li key={category._id}>\n                <label className=\"flex items-center space-x-2 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"category\"\n                    value={category._id}\n                    checked={filters.category === category._id}\n                    onChange={() => handleFilterChange('category', category._id)}\n                    className=\"radio radio-primary radio-sm\"\n                  />\n                  <span>{category.name}</span>\n                </label>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      {/* Price */}\n      <div className=\"p-4 bg-white rounded-lg shadow-sm border\">\n        <h3 className=\"font-semibold mb-3\">Giá</h3>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"number\"\n            placeholder=\"Từ\"\n            value={minPrice}\n            onChange={(e) => setMinPrice(e.target.value)}\n            className=\"input input-bordered w-full input-sm\"\n          />\n          <span>-</span>\n          <input\n            type=\"number\"\n            placeholder=\"Đến\"\n            value={maxPrice}\n            onChange={(e) => setMaxPrice(e.target.value)}\n            className=\"input input-bordered w-full input-sm\"\n          />\n        </div>\n        <button onClick={handlePriceChange} className=\"btn btn-sm btn-outline w-full mt-3\">\n          Áp dụng\n        </button>\n      </div>\n      \n      <button onClick={clearFilters} className=\"btn btn-outline btn-sm w-full\">\n        Xóa bộ lọc\n      </button>\n    </aside>\n  );\n};\n\nexport default FilterSidebar; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,WAAW,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQpD,MAAMC,aAA2C,GAAGA,CAAC;EAAEC,cAAc;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EAC1F,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAACO,cAAc,CAAC;EACtD,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAACO,cAAc,CAACI,QAAQ,IAAI,EAAE,CAAC;EACvE,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAACO,cAAc,CAACM,QAAQ,IAAI,EAAE,CAAC;EAEvE,MAAM;IAAEE,IAAI,EAAEC,UAAU,GAAG,EAAE;IAAEC,SAAS,EAAEC;EAAoB,CAAC,GAAGjB,QAAQ,CAAC,YAAY,EAAEC,WAAW,CAACiB,gBAAgB,CAAC;EAEtH,MAAMC,kBAAkB,GAAGA,CAACC,GAAW,EAAEC,KAAU,KAAK;IACtD;IACA,MAAMC,UAAU,GAAG;MAAE,GAAGd;IAAQ,CAAC;;IAEjC;IACA,IAAIa,KAAK,KAAK,EAAE,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKE,SAAS,EAAE;MACzD,OAAOD,UAAU,CAACF,GAAG,CAAC;IACxB,CAAC,MAAM;MACLE,UAAU,CAACF,GAAG,CAAC,GAAGC,KAAK;IACzB;;IAEA;IACAC,UAAU,CAACE,IAAI,GAAG,CAAC;IAEnBf,UAAU,CAACa,UAAU,CAAC;IACtBjB,cAAc,CAACiB,UAAU,CAAC;EAC5B,CAAC;EAED,MAAMG,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAIH,UAAU,GAAG;MAAE,GAAGd,OAAO;MAAEgB,IAAI,EAAE;IAAE,CAAC;IAExC,IAAId,QAAQ,EAAEY,UAAU,CAACZ,QAAQ,GAAGA,QAAQ,CAAC,KAAM,OAAOY,UAAU,CAACZ,QAAQ;IAC7E,IAAIE,QAAQ,EAAEU,UAAU,CAACV,QAAQ,GAAGA,QAAQ,CAAC,KAAM,OAAOU,UAAU,CAACV,QAAQ;IAE7EH,UAAU,CAACa,UAAU,CAAC;IACtBjB,cAAc,CAACiB,UAAU,CAAC;EAC5B,CAAC;EAED,MAAMI,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,cAAc,GAAG,CAAC,CAAC;IACzBlB,UAAU,CAACkB,cAAc,CAAC;IAC1BhB,WAAW,CAAC,EAAE,CAAC;IACfE,WAAW,CAAC,EAAE,CAAC;IACfR,cAAc,CAACsB,cAAc,CAAC;EAChC,CAAC;EAED,oBACExB,OAAA;IAAOyB,SAAS,EAAC,kCAAkC;IAAAC,QAAA,gBAIjD1B,OAAA;MAAKyB,SAAS,EAAC,0CAA0C;MAAAC,QAAA,gBACvD1B,OAAA;QAAIyB,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC/ChB,mBAAmB,gBAAGd,OAAA;QAAA0B,QAAA,EAAG;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBACvC9B,OAAA;QAAIyB,SAAS,EAAC,oCAAoC;QAAAC,QAAA,gBAChD1B,OAAA;UAAA0B,QAAA,eACE1B,OAAA;YAAOyB,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBAC3D1B,OAAA;cACE+B,IAAI,EAAC,OAAO;cACZC,IAAI,EAAC,UAAU;cACfd,KAAK,EAAC,EAAE;cACRe,OAAO,EAAE,CAAC5B,OAAO,CAAC6B,QAAS;cAC3BC,QAAQ,EAAEA,CAAA,KAAMnB,kBAAkB,CAAC,UAAU,EAAE,EAAE,CAAE;cACnDS,SAAS,EAAC;YAA8B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CAAC,eACF9B,OAAA;cAAA0B,QAAA,EAAM;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,EACJlB,UAAU,CAACwB,GAAG,CAAEF,QAAkB,iBACjClC,OAAA;UAAA0B,QAAA,eACE1B,OAAA;YAAOyB,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBAC3D1B,OAAA;cACE+B,IAAI,EAAC,OAAO;cACZC,IAAI,EAAC,UAAU;cACfd,KAAK,EAAEgB,QAAQ,CAACG,GAAI;cACpBJ,OAAO,EAAE5B,OAAO,CAAC6B,QAAQ,KAAKA,QAAQ,CAACG,GAAI;cAC3CF,QAAQ,EAAEA,CAAA,KAAMnB,kBAAkB,CAAC,UAAU,EAAEkB,QAAQ,CAACG,GAAG,CAAE;cAC7DZ,SAAS,EAAC;YAA8B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CAAC,eACF9B,OAAA;cAAA0B,QAAA,EAAOQ,QAAQ,CAACF;YAAI;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvB;QAAC,GAXDI,QAAQ,CAACG,GAAG;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAYjB,CACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACL;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGN9B,OAAA;MAAKyB,SAAS,EAAC,0CAA0C;MAAAC,QAAA,gBACvD1B,OAAA;QAAIyB,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC3C9B,OAAA;QAAKyB,SAAS,EAAC,6BAA6B;QAAAC,QAAA,gBAC1C1B,OAAA;UACE+B,IAAI,EAAC,QAAQ;UACbO,WAAW,EAAC,SAAI;UAChBpB,KAAK,EAAEX,QAAS;UAChB4B,QAAQ,EAAGI,CAAC,IAAK/B,WAAW,CAAC+B,CAAC,CAACC,MAAM,CAACtB,KAAK,CAAE;UAC7CO,SAAS,EAAC;QAAsC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eACF9B,OAAA;UAAA0B,QAAA,EAAM;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACd9B,OAAA;UACE+B,IAAI,EAAC,QAAQ;UACbO,WAAW,EAAC,eAAK;UACjBpB,KAAK,EAAET,QAAS;UAChB0B,QAAQ,EAAGI,CAAC,IAAK7B,WAAW,CAAC6B,CAAC,CAACC,MAAM,CAACtB,KAAK,CAAE;UAC7CO,SAAS,EAAC;QAAsC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACN9B,OAAA;QAAQyC,OAAO,EAAEnB,iBAAkB;QAACG,SAAS,EAAC,oCAAoC;QAAAC,QAAA,EAAC;MAEnF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAEN9B,OAAA;MAAQyC,OAAO,EAAElB,YAAa;MAACE,SAAS,EAAC,+BAA+B;MAAAC,QAAA,EAAC;IAEzE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEZ,CAAC;AAAC1B,EAAA,CAlHIH,aAA2C;EAAA,QAKmBJ,QAAQ;AAAA;AAAA6C,EAAA,GALtEzC,aAA2C;AAoHjD,eAAeA,aAAa;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
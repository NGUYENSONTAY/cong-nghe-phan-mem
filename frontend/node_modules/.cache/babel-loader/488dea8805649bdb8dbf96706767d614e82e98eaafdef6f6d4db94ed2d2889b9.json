{"ast":null,"code":"import React from'react';import{useMutation,useQueryClient}from'react-query';import{useNavigate}from'react-router-dom';import toast from'react-hot-toast';import{booksAPI}from'../../api/booksAPI';import BookForm from'../../components/admin/BookForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddBook=()=>{const navigate=useNavigate();const queryClient=useQueryClient();const createBookMutation=useMutation(booksAPI.createBook,{onSuccess:data=>{console.log('âœ… Mutation success:',data);toast.success('ThÃªm sÃ¡ch thÃ nh cÃ´ng!');queryClient.invalidateQueries('adminBooks');navigate('/admin/books');},onError:error=>{console.error('âŒ Mutation error:',error);toast.error(`Lá»—i khi thÃªm sÃ¡ch: ${error.message}`);},onMutate:variables=>{console.log('ðŸš€ Mutation starting with variables:',variables);}});const handleCreateBook=async data=>{console.log('ðŸ”¥ AddBook handleCreateBook called with data:',data);console.log('ðŸ“Š Mutation state before call:',{isLoading:createBookMutation.isLoading,isError:createBookMutation.isError,error:createBookMutation.error});try{createBookMutation.mutate(data);console.log('ðŸ“¤ Mutation.mutate() called successfully');}catch(error){console.error('ðŸš¨ Error calling mutation.mutate():',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Th\\xEAm s\\xE1ch m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u0110i\\u1EC1n th\\xF4ng tin \\u0111\\u1EC3 th\\xEAm s\\xE1ch m\\u1EDBi v\\xE0o h\\u1EC7 th\\u1ED1ng\"})]}),/*#__PURE__*/_jsx(BookForm,{onSubmit:handleCreateBook,isSubmitting:createBookMutation.isLoading,submitButtonText:\"Th\\xEAm s\\xE1ch\"})]});};export default AddBook;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
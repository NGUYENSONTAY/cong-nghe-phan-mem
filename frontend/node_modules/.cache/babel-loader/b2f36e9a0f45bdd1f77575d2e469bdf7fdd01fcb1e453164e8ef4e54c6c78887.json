{"ast":null,"code":"import React,{useState,useEffect}from'react';import{orderAPI}from'../api/orderAPI';import{Link}from'react-router-dom';import Loading from'../components/common/Loading';import{format}from'date-fns';import{vi}from'date-fns/locale';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrdersPage=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchOrders=async()=>{try{setLoading(true);const userOrders=await orderAPI.getOrdersForUser();// Sắp xếp đơn hàng mới nhất lên đầu\nsetOrders(userOrders.sort((a,b)=>new Date(b.orderDate).getTime()-new Date(a.orderDate).getTime()));}catch(err){setError(err.message||'Không thể tải được lịch sử đơn hàng.');}finally{setLoading(false);}};fetchOrders();},[]);const formatPrice=price=>{return new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(price);};const getStatusClass=status=>{switch(status){case'PENDING':return'badge-warning';case'CONFIRMED':return'badge-info';case'SHIPPED':return'badge-primary';case'DELIVERED':return'badge-success';case'CANCELLED':return'badge-error';default:return'badge-ghost';}};const translateStatus=status=>{const statusMap={PENDING:'Chờ xử lý',CONFIRMED:'Đã xác nhận',SHIPPED:'Đang giao',DELIVERED:'Đã giao',CANCELLED:'Đã hủy'};return statusMap[status]||status;};const renderContent=()=>{if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center p-12\",children:/*#__PURE__*/_jsx(Loading,{text:\"\\u0110ang t\\u1EA3i \\u0111\\u01A1n h\\xE0ng...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-12 text-red-500\",children:error});}if(orders.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"B\\u1EA1n ch\\u01B0a c\\xF3 \\u0111\\u01A1n h\\xE0ng n\\xE0o\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"H\\xE3y b\\u1EAFt \\u0111\\u1EA7u mua s\\u1EAFm \\u0111\\u1EC3 xem l\\u1ECBch s\\u1EED \\u0111\\u01A1n h\\xE0ng c\\u1EE7a b\\u1EA1n t\\u1EA1i \\u0111\\xE2y.\"}),/*#__PURE__*/_jsx(Link,{to:\"/books\",className:\"btn btn-primary mt-6\",children:\"Kh\\xE1m ph\\xE1 s\\xE1ch\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"M\\xE3 \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ng\\xE0y \\u0111\\u1EB7t\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\u1ED5ng ti\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"#\",order.id]}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(order.orderDate),'dd/MM/yyyy HH:mm',{locale:vi})}),/*#__PURE__*/_jsx(\"td\",{children:formatPrice(order.totalAmount)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`badge ${getStatusClass(order.status)}`,children:translateStatus(order.status)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-ghost btn-sm\",children:\"Xem chi ti\\u1EBFt\"})})]},order.id))})]})});};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0110\\u01A1n h\\xE0ng c\\u1EE7a t\\xF4i\"}),renderContent()]})})});};export default OrdersPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
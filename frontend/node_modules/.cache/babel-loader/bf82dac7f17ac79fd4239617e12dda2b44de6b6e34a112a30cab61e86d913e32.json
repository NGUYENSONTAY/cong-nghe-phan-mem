{"ast":null,"code":"import{api}from'./api';// Adapter: convert backend Book -> frontend Book\nconst adaptBook=b=>{var _ref,_b$id,_b$author$name,_b$author,_b$description,_b$price,_ref2,_b$stockQuantity,_ref3,_b$category$id,_b$category,_b$category2,_b$category$name,_b$category3,_b$category$descripti,_b$category4,_b$category$createdAt,_b$category5,_b$category$updatedAt,_b$category6,_b$images,_b$createdAt,_b$updatedAt;return{_id:(_ref=(_b$id=b.id)!==null&&_b$id!==void 0?_b$id:b._id)!==null&&_ref!==void 0?_ref:'',title:b.title,author:typeof b.author==='string'?b.author:(_b$author$name=(_b$author=b.author)===null||_b$author===void 0?void 0:_b$author.name)!==null&&_b$author$name!==void 0?_b$author$name:'',description:(_b$description=b.description)!==null&&_b$description!==void 0?_b$description:'',price:Number((_b$price=b.price)!==null&&_b$price!==void 0?_b$price:0),quantity:(_ref2=(_b$stockQuantity=b.stockQuantity)!==null&&_b$stockQuantity!==void 0?_b$stockQuantity:b.quantity)!==null&&_ref2!==void 0?_ref2:0,category:{_id:(_ref3=(_b$category$id=(_b$category=b.category)===null||_b$category===void 0?void 0:_b$category.id)!==null&&_b$category$id!==void 0?_b$category$id:(_b$category2=b.category)===null||_b$category2===void 0?void 0:_b$category2._id)!==null&&_ref3!==void 0?_ref3:'',name:(_b$category$name=(_b$category3=b.category)===null||_b$category3===void 0?void 0:_b$category3.name)!==null&&_b$category$name!==void 0?_b$category$name:'',description:(_b$category$descripti=(_b$category4=b.category)===null||_b$category4===void 0?void 0:_b$category4.description)!==null&&_b$category$descripti!==void 0?_b$category$descripti:'',createdAt:(_b$category$createdAt=(_b$category5=b.category)===null||_b$category5===void 0?void 0:_b$category5.createdAt)!==null&&_b$category$createdAt!==void 0?_b$category$createdAt:'',updatedAt:(_b$category$updatedAt=(_b$category6=b.category)===null||_b$category6===void 0?void 0:_b$category6.updatedAt)!==null&&_b$category$updatedAt!==void 0?_b$category$updatedAt:''},images:(_b$images=b.images)!==null&&_b$images!==void 0?_b$images:b.imageUrl?[b.imageUrl]:[],createdAt:(_b$createdAt=b.createdAt)!==null&&_b$createdAt!==void 0?_b$createdAt:'',updatedAt:(_b$updatedAt=b.updatedAt)!==null&&_b$updatedAt!==void 0?_b$updatedAt:''};};const adaptBooks=arr=>arr.map(adaptBook);export const booksAPI={getBooks:async(page,limit,filter)=>{const response=await api.get('/books',{params:{page,limit,...filter}});const backendData=response.data;// Adapt backend Spring Boot pagination format to frontend format\nreturn{data:adaptBooks(backendData.content||[]),totalItems:backendData.totalElements||0,totalPages:backendData.totalPages||0,currentPage:backendData.number||0};},getBookById:async id=>{const response=await api.get(`/books/${id}`);return adaptBook(response.data);},createBook:async bookData=>{console.log('ðŸ“š Creating book with data:',bookData);// Transform frontend data to backend format\nconst backendData={title:bookData.title,description:bookData.description,price:bookData.price,stockQuantity:bookData.quantity,// quantity -> stockQuantity\ncategoryId:bookData.category,// category -> categoryId\nauthorId:bookData.authorId,// Use authorId instead of author name\nimages:bookData.images};console.log('ðŸ“¤ Sending to backend:',backendData);try{const response=await api.post('/books',backendData);console.log('âœ… Backend response:',response.data);return adaptBook(response.data);}catch(error){console.error('âŒ Create book error:',error);throw error;}},updateBook:async(id,bookData)=>{const response=await api.put(`/books/${id}`,bookData);return adaptBook(response.data);},deleteBook:async id=>{await api.delete(`/books/${id}`);},getLatestBooks:async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;const response=await api.get('/books/latest',{params:{limit}});return adaptBooks(response.data);},getBestSellers:async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:4;const response=await api.get('/books/bestsellers',{params:{limit}});return adaptBooks(response.data);}};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
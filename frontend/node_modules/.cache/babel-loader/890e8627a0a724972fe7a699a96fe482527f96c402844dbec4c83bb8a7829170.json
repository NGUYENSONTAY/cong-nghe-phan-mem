{"ast":null,"code":"import{api}from'./api';export const uploadAPI={validateFile:file=>{const maxSize=5*1024*1024;// 5MB\nconst allowedTypes=['image/jpeg','image/jpg','image/png','image/gif','image/webp'];if(!file){return{isValid:false,error:'Không có file được chọn'};}if(file.size>maxSize){return{isValid:false,error:'Kích thước file quá lớn (tối đa 5MB)'};}if(!allowedTypes.includes(file.type)){return{isValid:false,error:'Định dạng file không được hỗ trợ (chỉ hỗ trợ JPG, PNG, GIF, WebP)'};}return{isValid:true};},uploadImage:async file=>{const validation=uploadAPI.validateFile(file);if(!validation.isValid){throw new Error(validation.error);}const formData=new FormData();formData.append('file',file);const response=await api.post('/upload/image',formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.success){return response.data.url;}else{throw new Error(response.data.message||'Upload failed');}},getImages:async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;const response=await api.get('/upload/images',{params:{page,size}});return response.data;},deleteImage:async filename=>{const response=await api.delete(`/upload/images/${filename}`);return response.data;},getImageUrl:filename=>{var _process$env$REACT_AP;return`${(_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api','')}/uploads/${filename}`;},formatFileSize:bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];}};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
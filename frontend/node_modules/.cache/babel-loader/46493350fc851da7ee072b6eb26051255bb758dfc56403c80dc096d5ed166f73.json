{"ast":null,"code":"import React from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{userAPI}from'../../api/userAPI';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const schema=yup.object().shape({currentPassword:yup.string().required('Mật khẩu hiện tại là bắt buộc'),newPassword:yup.string().required('Mật khẩu mới là bắt buộc').min(6,'Mật khẩu mới phải có ít nhất 6 ký tự'),confirmNewPassword:yup.string().oneOf([yup.ref('newPassword'),undefined],'Mật khẩu xác nhận không khớp').required('Vui lòng xác nhận mật khẩu mới')});// Loại bỏ confirmNewPassword khỏi type request\nconst ChangePasswordForm=()=>{const{register,handleSubmit,formState:{errors,isSubmitting},reset}=useForm({resolver:yupResolver(schema)});const onSubmit=async data=>{try{const payload={currentPassword:data.currentPassword,newPassword:data.newPassword};await userAPI.changePassword(payload);toast.success('Đổi mật khẩu thành công!');reset();// Xóa các trường trong form\n}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Có lỗi xảy ra, vui lòng thử lại.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 mt-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",...register('currentPassword'),className:`input input-bordered ${errors.currentPassword?'input-error':''}`}),errors.currentPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.currentPassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",...register('newPassword'),className:`input input-bordered ${errors.newPassword?'input-error':''}`}),errors.newPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.newPassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u m\\u1EDBi\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",...register('confirmNewPassword'),className:`input input-bordered ${errors.confirmNewPassword?'input-error':''}`}),errors.confirmNewPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.confirmNewPassword.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control pt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Đang lưu...':'Đổi mật khẩu'})})]})]});};export default ChangePasswordForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
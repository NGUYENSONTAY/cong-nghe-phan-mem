{"ast":null,"code":"import React,{useEffect}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{useAuth}from'../../contexts/AuthContext';import{Link,useNavigate,useLocation}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const schema=yup.object().shape({email:yup.string().email('Email không hợp lệ').required('Email là bắt buộc'),password:yup.string().required('Mật khẩu là bắt buộc')});const LoginPage=()=>{var _location$state,_location$state$from;const{login,isAuthenticated}=useAuth();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';const{register,handleSubmit,formState:{errors,isSubmitting}}=useForm({resolver:yupResolver(schema)});useEffect(()=>{if(isAuthenticated){navigate(from,{replace:true});}},[isAuthenticated,navigate,from]);const onSubmit=async data=>{try{await login(data);toast.success('Đăng nhập thành công!');navigate(from,{replace:true});}catch(error){var _error$response,_error$response$data;toast.error((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Email hoặc mật khẩu không chính xác.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center text-gray-900\",children:\"\\u0110\\u0103ng nh\\u1EADp v\\xE0o t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"\\u0110\\u1ECBa ch\\u1EC9 email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",...register('email'),className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${errors.email?'border-red-500':''}`}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-600\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",...register('password'),className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${errors.password?'border-red-500':''}`}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-600\",children:errors.password.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\",children:isSubmitting?'Đang xử lý...':'Đăng nhập'})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-center text-gray-600\",children:[\"Ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"\\u0110\\u0103ng k\\xFD ngay\"})]})]})});};export default LoginPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/home/diengb/bansach/bookstore/frontend/src/components/admin/BookForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useForm, useWatch } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { useQuery } from 'react-query';\nimport { categoryAPI } from '../../api/categoryAPI';\nimport { authorAPI } from '../../api/authorAPI';\nimport { uploadAPI } from '../../api/uploadAPI';\nimport Loading from '../common/Loading';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  title: yup.string().min(1, 'T√™n s√°ch √≠t nh·∫•t 1 k√Ω t·ª±').required('T√™n s√°ch l√† b·∫Øt bu·ªôc'),\n  authorId: yup.string().required('T√°c gi·∫£ l√† b·∫Øt bu·ªôc'),\n  description: yup.string().min(1, 'M√¥ t·∫£ √≠t nh·∫•t 1 k√Ω t·ª±').required('M√¥ t·∫£ l√† b·∫Øt bu·ªôc'),\n  price: yup.number().typeError('Gi√° ph·∫£i l√† m·ªôt con s·ªë').positive('Gi√° ph·∫£i l√† s·ªë d∆∞∆°ng').required('Gi√° l√† b·∫Øt bu·ªôc'),\n  quantity: yup.number().typeError('S·ªë l∆∞·ª£ng ph·∫£i l√† m·ªôt con s·ªë').integer('S·ªë l∆∞·ª£ng ph·∫£i l√† s·ªë nguy√™n').min(0, 'S·ªë l∆∞·ª£ng kh√¥ng ƒë∆∞·ª£c √¢m').required('S·ªë l∆∞·ª£ng l√† b·∫Øt bu·ªôc'),\n  category: yup.string().required('Danh m·ª•c l√† b·∫Øt bu·ªôc'),\n  images: yup.array().of(yup.string().required('URL ·∫£nh l√† b·∫Øt bu·ªôc')).min(1, 'C·∫ßn √≠t nh·∫•t m·ªôt h√¨nh ·∫£nh').required('H√¨nh ·∫£nh l√† b·∫Øt bu·ªôc')\n});\nconst BookForm = ({\n  onSubmit,\n  initialData,\n  isSubmitting,\n  submitButtonText = 'L∆∞u'\n}) => {\n  _s();\n  const {\n    data: categories,\n    isLoading: isLoadingCategories,\n    error: categoriesError\n  } = useQuery('categories', categoryAPI.getAllCategories);\n  const {\n    data: authors,\n    isLoading: isLoadingAuthors,\n    error: authorsError\n  } = useQuery('authors', authorAPI.getAllAuthors);\n  const {\n    register,\n    handleSubmit,\n    control,\n    reset,\n    setValue,\n    getValues,\n    formState: {\n      errors\n    }\n  } = useForm({\n    // resolver: yupResolver(schema), // Temporarily disable validation\n    defaultValues: {\n      images: []\n    }\n  });\n  const imagesValue = useWatch({\n    control,\n    name: 'images'\n  });\n  useEffect(() => {\n    if (initialData && authors) {\n      var _authors$find;\n      // Find authorId from author name\n      const authorId = ((_authors$find = authors.find(author => author.name === initialData.author)) === null || _authors$find === void 0 ? void 0 : _authors$find._id) || '';\n      console.log('üîÑ Setting initial data:', {\n        ...initialData,\n        category: initialData.category._id,\n        authorId: authorId,\n        foundAuthor: authors.find(author => author.name === initialData.author)\n      });\n      reset({\n        ...initialData,\n        category: initialData.category._id,\n        authorId: authorId\n      });\n    }\n  }, [initialData, authors, reset]);\n  const handleFormSubmit = data => {\n    console.log('üî• Form submitted with data:', data);\n    console.log('üîç Form validation errors:', errors);\n    console.log('üìã isSubmitting state:', isSubmitting);\n    try {\n      onSubmit(data);\n    } catch (error) {\n      console.error('üö® Error in handleFormSubmit:', error);\n    }\n  };\n  const handleFileChange = async e => {\n    var _e$target$files;\n    console.log('üìÅ File input changed:', (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files.length);\n    if (!e.target.files) return;\n    const files = Array.from(e.target.files);\n    for (const file of files) {\n      const validation = uploadAPI.validateFile(file);\n      if (!validation.isValid) {\n        toast.error(String(validation.error || 'File kh√¥ng h·ª£p l·ªá'));\n        continue;\n      }\n      try {\n        toast.loading('ƒêang t·∫£i ·∫£nh l√™n...', {\n          id: 'upload'\n        });\n        const url = await uploadAPI.uploadImage(file);\n        const current = getValues('images') || [];\n        setValue('images', [...current, url]);\n        toast.success('T·∫£i ·∫£nh th√†nh c√¥ng', {\n          id: 'upload'\n        });\n        console.log('‚úÖ Image uploaded:', url);\n      } catch (err) {\n        const msg = err && typeof err === 'object' && 'message' in err ? err.message : 'L·ªói t·∫£i ·∫£nh';\n        toast.error(String(msg), {\n          id: 'upload'\n        });\n        console.error('‚ùå Image upload error:', err);\n      }\n    }\n    e.target.value = '';\n  };\n  if (isLoadingCategories || isLoadingAuthors) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 55\n  }, this);\n  if (categoriesError || authorsError) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-red-500\",\n    children: \"L\\u1ED7i khi t\\u1EA3i danh m\\u1EE5c ho\\u1EB7c t\\xE1c gi\\u1EA3.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 47\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: e => {\n      console.log('üìù Form onSubmit triggered!');\n      console.log('üìã Form data before handleSubmit:', getValues());\n      console.log('üîç Current validation errors:', errors);\n      console.log('üìä Form validation state:', {\n        isValid: Object.keys(errors).length === 0,\n        errorCount: Object.keys(errors).length,\n        errors: errors\n      });\n\n      // Prevent default and call handleSubmit manually to debug\n      e.preventDefault();\n      const formData = getValues();\n      console.log('üìã About to validate and submit:', formData);\n\n      // Call handleSubmit manually with better error handling\n      handleSubmit(data => {\n        console.log('‚úÖ Validation passed, calling handleFormSubmit with:', data);\n        handleFormSubmit(data);\n      }, errors => {\n        console.error('‚ùå Validation failed with errors:', errors);\n      })(e);\n    },\n    className: \"space-y-6 bg-white p-8 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"T\\xEAn s\\xE1ch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"title\",\n          type: \"text\",\n          ...register('title'),\n          className: `mt-1 block w-full px-3 py-2 border ${errors.title ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-red-600\",\n          children: errors.title.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"author\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"T\\xE1c gi\\u1EA3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"author\",\n          ...register('authorId'),\n          className: `mt-1 block w-full px-3 py-2 border ${errors.authorId ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Ch\\u1ECDn t\\xE1c gi\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), authors === null || authors === void 0 ? void 0 : authors.map(author => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: author._id,\n            children: author.name\n          }, author._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), errors.authorId && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-red-600\",\n          children: errors.authorId.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"M\\xF4 t\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        rows: 4,\n        ...register('description'),\n        className: `mt-1 block w-full px-3 py-2 border ${errors.description ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-sm text-red-600\",\n        children: errors.description.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"price\",\n          type: \"number\",\n          ...register('price'),\n          className: `mt-1 block w-full px-3 py-2 border ${errors.price ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), errors.price && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-red-600\",\n          children: errors.price.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"quantity\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"S\\u1ED1 l\\u01B0\\u1EE3ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"quantity\",\n          type: \"number\",\n          ...register('quantity'),\n          className: `mt-1 block w-full px-3 py-2 border ${errors.quantity ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), errors.quantity && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-red-600\",\n          children: errors.quantity.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"category\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Danh m\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"category\",\n          ...register('category'),\n          className: `mt-1 block w-full px-3 py-2 border ${errors.category ? 'border-red-500' : 'border-gray-300'} bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Ch\\u1ECDn danh m\\u1EE5c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), categories === null || categories === void 0 ? void 0 : categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cat._id,\n            children: cat.name\n          }, cat._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), errors.category && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-red-600\",\n          children: errors.category.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium text-gray-700 mb-2\",\n        children: \"H\\xECnh \\u1EA3nh s\\xE1ch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          multiple: true,\n          className: \"hidden\",\n          id: \"fileInput\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fileInput\",\n          className: \"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 cursor-pointer transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 mr-2\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), \"T\\u1EA3i \\u1EA3nh l\\xEAn\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), imagesValue && imagesValue.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-3 text-sm text-gray-600\",\n          children: [\"\\u0110\\xE3 c\\xF3 \", imagesValue.length, \" \\u1EA3nh\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), imagesValue && imagesValue.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4\",\n        children: imagesValue.map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: url,\n            alt: `Preview ${index + 1}`,\n            className: \"w-full h-24 object-cover rounded-lg border border-gray-300\",\n            onError: e => {\n              e.currentTarget.src = '/placeholder-image.png';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              const current = getValues('images') || [];\n              setValue('images', current.filter((_, i) => i !== index));\n            },\n            className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this), errors.images && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-sm text-red-600\",\n        children: errors.images.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isSubmitting,\n        onClick: () => console.log('üñ±Ô∏è Submit button clicked!'),\n        className: \"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300\",\n        children: isSubmitting ? 'ƒêang x·ª≠ l√Ω...' : submitButtonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n_s(BookForm, \"eOlcmPQq6Ecb1AI+A+kYzKPDa+w=\", false, function () {\n  return [useQuery, useQuery, useForm, useWatch];\n});\n_c = BookForm;\nexport default BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useEffect","useForm","useWatch","yup","useQuery","categoryAPI","authorAPI","uploadAPI","Loading","toast","jsxDEV","_jsxDEV","schema","object","shape","title","string","min","required","authorId","description","price","number","typeError","positive","quantity","integer","category","images","array","of","BookForm","onSubmit","initialData","isSubmitting","submitButtonText","_s","data","categories","isLoading","isLoadingCategories","error","categoriesError","getAllCategories","authors","isLoadingAuthors","authorsError","getAllAuthors","register","handleSubmit","control","reset","setValue","getValues","formState","errors","defaultValues","imagesValue","name","_authors$find","find","author","_id","console","log","foundAuthor","handleFormSubmit","handleFileChange","e","_e$target$files","target","files","length","Array","from","file","validation","validateFile","isValid","String","loading","id","url","uploadImage","current","success","err","msg","message","value","fileName","_jsxFileName","lineNumber","columnNumber","className","children","Object","keys","errorCount","preventDefault","formData","htmlFor","type","map","rows","cat","accept","multiple","onChange","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","index","src","alt","onError","currentTarget","onClick","filter","_","i","disabled","_c","$RefreshReg$"],"sources":["/home/diengb/bansach/bookstore/frontend/src/components/admin/BookForm.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useForm, Controller, useWatch } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useQuery } from 'react-query';\nimport { categoryAPI } from '../../api/categoryAPI';\nimport { authorAPI } from '../../api/authorAPI';\nimport { uploadAPI } from '../../api/uploadAPI';\nimport { Book } from '../../types';\nimport Loading from '../common/Loading';\nimport toast from 'react-hot-toast';\n\ninterface BookFormProps {\n  onSubmit: (data: BookFormData) => Promise<void>;\n  initialData?: Book;\n  isSubmitting: boolean;\n  submitButtonText?: string;\n}\n\nexport interface BookFormData {\n  title: string;\n  authorId: string;\n  description: string;\n  price: number;\n  quantity: number;\n  category: string;\n  images: string[];\n}\n\nconst schema = yup.object().shape({\n  title: yup.string().min(1, 'T√™n s√°ch √≠t nh·∫•t 1 k√Ω t·ª±').required('T√™n s√°ch l√† b·∫Øt bu·ªôc'),\n  authorId: yup.string().required('T√°c gi·∫£ l√† b·∫Øt bu·ªôc'),\n  description: yup.string().min(1, 'M√¥ t·∫£ √≠t nh·∫•t 1 k√Ω t·ª±').required('M√¥ t·∫£ l√† b·∫Øt bu·ªôc'),\n  price: yup\n    .number()\n    .typeError('Gi√° ph·∫£i l√† m·ªôt con s·ªë')\n    .positive('Gi√° ph·∫£i l√† s·ªë d∆∞∆°ng')\n    .required('Gi√° l√† b·∫Øt bu·ªôc'),\n  quantity: yup\n    .number()\n    .typeError('S·ªë l∆∞·ª£ng ph·∫£i l√† m·ªôt con s·ªë')\n    .integer('S·ªë l∆∞·ª£ng ph·∫£i l√† s·ªë nguy√™n')\n    .min(0, 'S·ªë l∆∞·ª£ng kh√¥ng ƒë∆∞·ª£c √¢m')\n    .required('S·ªë l∆∞·ª£ng l√† b·∫Øt bu·ªôc'),\n  category: yup.string().required('Danh m·ª•c l√† b·∫Øt bu·ªôc'),\n  images: yup\n    .array()\n    .of(yup.string().required('URL ·∫£nh l√† b·∫Øt bu·ªôc'))\n    .min(1, 'C·∫ßn √≠t nh·∫•t m·ªôt h√¨nh ·∫£nh')\n    .required('H√¨nh ·∫£nh l√† b·∫Øt bu·ªôc'),\n});\n\nconst BookForm: React.FC<BookFormProps> = ({\n  onSubmit,\n  initialData,\n  isSubmitting,\n  submitButtonText = 'L∆∞u',\n}) => {\n  const {\n    data: categories,\n    isLoading: isLoadingCategories,\n    error: categoriesError,\n  } = useQuery('categories', categoryAPI.getAllCategories);\n\n  const {\n    data: authors,\n    isLoading: isLoadingAuthors,\n    error: authorsError,\n  } = useQuery('authors', authorAPI.getAllAuthors);\n\n  const {\n    register,\n    handleSubmit,\n    control,\n    reset,\n    setValue,\n    getValues,\n    formState: { errors },\n  } = useForm<BookFormData>({\n    // resolver: yupResolver(schema), // Temporarily disable validation\n    defaultValues: {\n      images: [],\n    },\n  });\n\n  const imagesValue = useWatch({ control, name: 'images' });\n\n  useEffect(() => {\n    if (initialData && authors) {\n      // Find authorId from author name\n      const authorId = authors.find(author => author.name === initialData.author)?._id || '';\n      \n      console.log('üîÑ Setting initial data:', {\n        ...initialData,\n        category: initialData.category._id,\n        authorId: authorId,\n        foundAuthor: authors.find(author => author.name === initialData.author)\n      });\n      \n      reset({\n        ...initialData,\n        category: initialData.category._id,\n        authorId: authorId,\n      });\n    }\n  }, [initialData, authors, reset]);\n\n  const handleFormSubmit = (data: BookFormData) => {\n    console.log('üî• Form submitted with data:', data);\n    console.log('üîç Form validation errors:', errors);\n    console.log('üìã isSubmitting state:', isSubmitting);\n    \n    try {\n      onSubmit(data);\n    } catch (error) {\n      console.error('üö® Error in handleFormSubmit:', error);\n    }\n  };\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    console.log('üìÅ File input changed:', e.target.files?.length);\n    if (!e.target.files) return;\n    const files = Array.from(e.target.files);\n    for (const file of files) {\n      const validation = uploadAPI.validateFile(file);\n      if (!validation.isValid) {\n        toast.error(String(validation.error || 'File kh√¥ng h·ª£p l·ªá'));\n        continue;\n      }\n      try {\n        toast.loading('ƒêang t·∫£i ·∫£nh l√™n...', { id: 'upload' });\n        const url = await uploadAPI.uploadImage(file);\n        const current = getValues('images') || [];\n        setValue('images', [...current, url]);\n        toast.success('T·∫£i ·∫£nh th√†nh c√¥ng', { id: 'upload' });\n        console.log('‚úÖ Image uploaded:', url);\n      } catch (err: any) {\n        const msg = (err && typeof err === 'object' && 'message' in err) ? (err as any).message : 'L·ªói t·∫£i ·∫£nh';\n        toast.error(String(msg), { id: 'upload' });\n        console.error('‚ùå Image upload error:', err);\n      }\n    }\n    e.target.value = '';\n  };\n\n  if (isLoadingCategories || isLoadingAuthors) return <Loading />;\n  if (categoriesError || authorsError) return <p className=\"text-red-500\">L·ªói khi t·∫£i danh m·ª•c ho·∫∑c t√°c gi·∫£.</p>;\n\n  return (\n    <form \n      onSubmit={(e) => {\n        console.log('üìù Form onSubmit triggered!');\n        console.log('üìã Form data before handleSubmit:', getValues());\n        console.log('üîç Current validation errors:', errors);\n        console.log('üìä Form validation state:', {\n          isValid: Object.keys(errors).length === 0,\n          errorCount: Object.keys(errors).length,\n          errors: errors\n        });\n        \n        // Prevent default and call handleSubmit manually to debug\n        e.preventDefault();\n        \n        const formData = getValues();\n        console.log('üìã About to validate and submit:', formData);\n        \n        // Call handleSubmit manually with better error handling\n        handleSubmit(\n          (data) => {\n            console.log('‚úÖ Validation passed, calling handleFormSubmit with:', data);\n            handleFormSubmit(data);\n          },\n          (errors) => {\n            console.error('‚ùå Validation failed with errors:', errors);\n          }\n        )(e);\n      }} \n      className=\"space-y-6 bg-white p-8 rounded-lg shadow-md\"\n    >\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Title */}\n        <div>\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700\">T√™n s√°ch</label>\n          <input\n            id=\"title\"\n            type=\"text\"\n            {...register('title')}\n            className={`mt-1 block w-full px-3 py-2 border ${errors.title ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n          />\n          {errors.title && <p className=\"mt-2 text-sm text-red-600\">{errors.title.message}</p>}\n        </div>\n\n        {/* Author */}\n        <div>\n          <label htmlFor=\"author\" className=\"block text-sm font-medium text-gray-700\">T√°c gi·∫£</label>\n          <select\n            id=\"author\"\n            {...register('authorId')}\n            className={`mt-1 block w-full px-3 py-2 border ${errors.authorId ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n          >\n            <option value=\"\">Ch·ªçn t√°c gi·∫£</option>\n            {authors?.map((author) => (\n              <option key={author._id} value={author._id}>{author.name}</option>\n            ))}\n          </select>\n          {errors.authorId && <p className=\"mt-2 text-sm text-red-600\">{errors.authorId.message}</p>}\n        </div>\n      </div>\n\n      {/* Description */}\n      <div>\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">M√¥ t·∫£</label>\n        <textarea\n          id=\"description\"\n          rows={4}\n          {...register('description')}\n          className={`mt-1 block w-full px-3 py-2 border ${errors.description ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n        />\n        {errors.description && <p className=\"mt-2 text-sm text-red-600\">{errors.description.message}</p>}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {/* Price */}\n        <div>\n          <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700\">Gi√°</label>\n          <input\n            id=\"price\"\n            type=\"number\"\n            {...register('price')}\n            className={`mt-1 block w-full px-3 py-2 border ${errors.price ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n          />\n          {errors.price && <p className=\"mt-2 text-sm text-red-600\">{errors.price.message}</p>}\n        </div>\n\n        {/* Quantity */}\n        <div>\n          <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-700\">S·ªë l∆∞·ª£ng</label>\n          <input\n            id=\"quantity\"\n            type=\"number\"\n            {...register('quantity')}\n            className={`mt-1 block w-full px-3 py-2 border ${errors.quantity ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n          />\n          {errors.quantity && <p className=\"mt-2 text-sm text-red-600\">{errors.quantity.message}</p>}\n        </div>\n\n        {/* Category */}\n        <div>\n          <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700\">Danh m·ª•c</label>\n          <select\n            id=\"category\"\n            {...register('category')}\n            className={`mt-1 block w-full px-3 py-2 border ${errors.category ? 'border-red-500' : 'border-gray-300'} bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n          >\n            <option value=\"\">Ch·ªçn danh m·ª•c</option>\n            {categories?.map((cat) => (\n              <option key={cat._id} value={cat._id}>{cat.name}</option>\n            ))}\n          </select>\n          {errors.category && <p className=\"mt-2 text-sm text-red-600\">{errors.category.message}</p>}\n        </div>\n      </div>\n      \n      {/* Images */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          H√¨nh ·∫£nh s√°ch\n        </label>\n        \n        {/* Upload Button */}\n        <div className=\"mb-4\">\n          <input \n            type=\"file\" \n            accept=\"image/*\" \n            multiple \n            className=\"hidden\" \n            id=\"fileInput\" \n            onChange={handleFileChange} \n          />\n          <label \n            htmlFor=\"fileInput\" \n            className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 cursor-pointer transition-colors\"\n          >\n            <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n            </svg>\n            T·∫£i ·∫£nh l√™n\n          </label>\n          {imagesValue && imagesValue.length > 0 && (\n            <span className=\"ml-3 text-sm text-gray-600\">\n              ƒê√£ c√≥ {imagesValue.length} ·∫£nh\n            </span>\n          )}\n        </div>\n\n        {/* Image Preview */}\n        {imagesValue && imagesValue.length > 0 && (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4\">\n            {imagesValue.map((url, index) => (\n              <div key={index} className=\"relative group\">\n                <img\n                  src={url}\n                  alt={`Preview ${index + 1}`}\n                  className=\"w-full h-24 object-cover rounded-lg border border-gray-300\"\n                  onError={(e) => {\n                    e.currentTarget.src = '/placeholder-image.png';\n                  }}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const current = getValues('images') || [];\n                    setValue('images', current.filter((_, i) => i !== index));\n                  }}\n                  className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                >\n                  √ó\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {errors.images && <p className=\"mt-2 text-sm text-red-600\">{errors.images.message}</p>}\n      </div>\n\n\n      {/* Submit Button */}\n      <div className=\"flex justify-end\">\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          onClick={() => console.log('üñ±Ô∏è Submit button clicked!')}\n          className=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300\"\n        >\n          {isSubmitting ? 'ƒêang x·ª≠ l√Ω...' : submitButtonText}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default BookForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React from'react';import{useQuery}from'react-query';import{Link}from'react-router-dom';import{adminAPI}from'../../api/adminAPI';import{orderAPI}from'../../api/orderAPI';import Loading from'../../components/common/Loading';import{FaBook,FaShoppingCart,FaUsers,FaDollarSign,FaTags,FaPen,FaEye,FaPlus,FaChartLine}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOverview=()=>{var _stats$books,_stats$books2,_stats$orders,_stats$orders2,_stats$categories,_stats$authors,_stats$orders3,_stats$orders4,_stats$orders5,_stats$orders6,_stats$orders7;const{data:stats,isLoading,error}=useQuery('adminOverview',adminAPI.getOverview,{refetchInterval:30000// Refresh every 30 seconds\n});const{data:recentOrders,isLoading:ordersLoading}=useQuery('recentOrders',()=>orderAPI.getAllOrders(0,5),// Get latest 5 orders\n{refetchInterval:60000// Refresh every minute\n});const{data:bestSellers,isLoading:bestSellersLoading}=useQuery('bestSellers',()=>adminAPI.getBestSellers(5),{refetchInterval:300000// Refresh every 5 minutes\n});if(isLoading)return/*#__PURE__*/_jsx(Loading,{text:\"\\u0110ang t\\u1EA3i th\\u1ED1ng k\\xEA t\\u1ED5ng quan...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-500\",children:[\"L\\u1ED7i khi t\\u1EA3i d\\u1EEF li\\u1EC7u: \",error.message]});const formatCurrency=amount=>{return new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(amount);};const formatDateTime=dateString=>{return new Date(dateString).toLocaleString('vi-VN');};const getStatusText=status=>{switch(status){case'PENDING':return'Chờ xử lý';case'CONFIRMED':return'Đã xác nhận';case'SHIPPED':return'Đang giao';case'DELIVERED':return'Đã giao';case'CANCELLED':return'Đã hủy';default:return status;}};const getStatusColor=status=>{switch(status){case'PENDING':return'bg-yellow-100 text-yellow-800';case'CONFIRMED':return'bg-blue-100 text-blue-800';case'SHIPPED':return'bg-indigo-100 text-indigo-800';case'DELIVERED':return'bg-green-100 text-green-800';case'CANCELLED':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const statCards=[{title:'Tổng số sách',value:(stats===null||stats===void 0?void 0:(_stats$books=stats.books)===null||_stats$books===void 0?void 0:_stats$books.total)||0,subtitle:`${(stats===null||stats===void 0?void 0:(_stats$books2=stats.books)===null||_stats$books2===void 0?void 0:_stats$books2.available)||0} còn hàng`,icon:FaBook,color:'bg-blue-500',change:'+5%',link:'/admin/books'},{title:'Đơn hàng mới',value:(stats===null||stats===void 0?void 0:(_stats$orders=stats.orders)===null||_stats$orders===void 0?void 0:_stats$orders.pending)||0,subtitle:`${(stats===null||stats===void 0?void 0:(_stats$orders2=stats.orders)===null||_stats$orders2===void 0?void 0:_stats$orders2.total)||0} tổng đơn`,icon:FaShoppingCart,color:'bg-green-500',change:'+12%',link:'/admin/orders'},{title:'Danh mục',value:(stats===null||stats===void 0?void 0:(_stats$categories=stats.categories)===null||_stats$categories===void 0?void 0:_stats$categories.total)||0,subtitle:'Thể loại sách',icon:FaTags,color:'bg-purple-500',change:'+2%',link:'/admin/categories'},{title:'Tác giả',value:(stats===null||stats===void 0?void 0:(_stats$authors=stats.authors)===null||_stats$authors===void 0?void 0:_stats$authors.total)||0,subtitle:'Tác giả trong hệ thống',icon:FaPen,color:'bg-orange-500',change:'+8%',link:'/admin/books'// Changed from /admin/authors to /admin/books\n},{title:'Doanh thu',value:formatCurrency((stats===null||stats===void 0?void 0:stats.totalRevenue)||0),subtitle:'Tổng doanh thu',icon:FaDollarSign,color:'bg-emerald-500',change:'+15%',link:'/admin/orders'// Changed from /admin/analytics to /admin/orders\n}];const orderStats=[{label:'Chờ xử lý',value:(stats===null||stats===void 0?void 0:(_stats$orders3=stats.orders)===null||_stats$orders3===void 0?void 0:_stats$orders3.pending)||0,color:'bg-yellow-500'},{label:'Đã xác nhận',value:(stats===null||stats===void 0?void 0:(_stats$orders4=stats.orders)===null||_stats$orders4===void 0?void 0:_stats$orders4.confirmed)||0,color:'bg-blue-500'},{label:'Đang giao',value:(stats===null||stats===void 0?void 0:(_stats$orders5=stats.orders)===null||_stats$orders5===void 0?void 0:_stats$orders5.shipped)||0,color:'bg-indigo-500'},{label:'Đã giao',value:(stats===null||stats===void 0?void 0:(_stats$orders6=stats.orders)===null||_stats$orders6===void 0?void 0:_stats$orders6.delivered)||0,color:'bg-green-500'},{label:'Đã hủy',value:(stats===null||stats===void 0?void 0:(_stats$orders7=stats.orders)===null||_stats$orders7===void 0?void 0:_stats$orders7.cancelled)||0,color:'bg-red-500'}];const quickActions=[{title:'Thêm sách mới',description:'Thêm sách mới vào kho',icon:FaPlus,color:'text-blue-500',link:'/admin/books/new'},{title:'Xem đơn hàng mới',description:'Quản lý đơn hàng chờ xử lý',icon:FaEye,color:'text-green-500',link:'/admin/orders?status=PENDING'},{title:'Quản lý danh mục',description:'Xem và chỉnh sửa danh mục',icon:FaChartLine,color:'text-purple-500',link:'/admin/categories'// Changed from /admin/analytics to /admin/categories\n},{title:'Quản lý người dùng',description:'Xem và quản lý tài khoản',icon:FaUsers,color:'text-orange-500',link:'/admin/users'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"T\\u1ED5ng quan Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"C\\u1EADp nh\\u1EADt l\\xFAc: \",new Date().toLocaleTimeString('vi-VN')]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\",children:statCards.map((stat,index)=>/*#__PURE__*/_jsxs(Link,{to:stat.link,className:\"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:stat.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 mt-1\",children:typeof stat.value==='number'?stat.value.toLocaleString('vi-VN'):stat.value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:stat.subtitle})]}),/*#__PURE__*/_jsx(\"div\",{className:`${stat.color} p-3 rounded-lg`,children:/*#__PURE__*/_jsx(stat.icon,{className:\"w-6 h-6 text-white\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 text-sm font-medium\",children:stat.change}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-sm ml-1\",children:\"so v\\u1EDBi th\\xE1ng tr\\u01B0\\u1EDBc\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Tr\\u1EA1ng th\\xE1i \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:orderStats.map((stat,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${stat.color} mr-3`}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:stat.label})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:stat.value.toLocaleString('vi-VN')})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/orders\",className:\"text-sm text-blue-600 hover:text-blue-800 font-medium\",children:\"Xem t\\u1EA5t c\\u1EA3 \\u0111\\u01A1n h\\xE0ng \\u2192\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Thao t\\xE1c nhanh\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:quickActions.map((action,index)=>/*#__PURE__*/_jsx(Link,{to:action.link,className:\"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(action.icon,{className:`w-4 h-4 ${action.color} mr-3`}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:action.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:action.description})]})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"S\\xE1ch b\\xE1n ch\\u1EA1y\"}),bestSellersLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsx(Loading,{text:\"\\u0110ang t\\u1EA3i...\"})}):bestSellers&&bestSellers.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:bestSellers.slice(0,5).map((book,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-semibold text-blue-600\",children:[\"#\",index+1]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate max-w-[150px]\",children:book.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:book.author})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-600\",children:[book.soldCount||0,\" b\\xE1n\"]})]},book._id||index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/books\",className:\"text-sm text-blue-600 hover:text-blue-800 font-medium\",children:\"Xem t\\u1EA5t c\\u1EA3 s\\xE1ch \\u2192\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0110\\u01A1n h\\xE0ng g\\u1EA7n \\u0111\\xE2y\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/orders\",className:\"text-sm text-blue-600 hover:text-blue-800 font-medium\",children:\"Xem t\\u1EA5t c\\u1EA3 \\u2192\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:ordersLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(Loading,{text:\"\\u0110ang t\\u1EA3i \\u0111\\u01A1n h\\xE0ng...\"})}):recentOrders&&recentOrders.data&&recentOrders.data.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-sm font-medium text-gray-600\",children:\"M\\xE3 \\u0111\\u01A1n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-sm font-medium text-gray-600\",children:\"Kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-sm font-medium text-gray-600\",children:\"Ng\\xE0y \\u0111\\u1EB7t\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-sm font-medium text-gray-600\",children:\"T\\u1ED5ng ti\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-sm font-medium text-gray-600\",children:\"Tr\\u1EA1ng th\\xE1i\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recentOrders.data.map(order=>{var _order$user;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsxs(Link,{to:`/admin/orders/${order._id}`,className:\"text-sm font-medium text-blue-600 hover:text-blue-800\",children:[\"#\",order._id]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-sm text-gray-900\",children:((_order$user=order.user)===null||_order$user===void 0?void 0:_order$user.name)||order.customerName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-sm text-gray-600\",children:formatDateTime(order.orderDate||order.createdAt)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-sm font-medium text-gray-900\",children:formatCurrency(order.totalAmount)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(order.status)}`,children:getStatusText(order.status)})})]},order._id);})})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Ch\\u01B0a c\\xF3 \\u0111\\u01A1n h\\xE0ng n\\xE0o\"})})})]})]});};export default AdminOverview;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
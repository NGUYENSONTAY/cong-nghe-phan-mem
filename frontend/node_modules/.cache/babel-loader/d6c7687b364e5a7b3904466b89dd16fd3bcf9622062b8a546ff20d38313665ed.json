{"ast":null,"code":"import React from'react';import{useQuery}from'react-query';import{useSearchParams,Link,useNavigate}from'react-router-dom';import{orderAPI}from'../../api/orderAPI';import Pagination from'../../components/common/Pagination';import Loading from'../../components/common/Loading';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getStatusClassName=status=>{switch(status){case'PENDING':return'bg-yellow-100 text-yellow-800';case'PROCESSING':return'bg-blue-100 text-blue-800';case'SHIPPED':return'bg-green-100 text-green-800';case'DELIVERED':return'bg-purple-100 text-purple-800';case'CANCELLED':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const ORDER_STATUSES=['PENDING','PROCESSING','SHIPPED','DELIVERED','CANCELLED'];const AdminOrderManagement=()=>{const[searchParams,setSearchParams]=useSearchParams();const navigate=useNavigate();const currentPage=parseInt(searchParams.get('page')||'1',10);const currentStatus=searchParams.get('status');const{data:response,isLoading,error}=useQuery(['adminOrders',currentPage,currentStatus],()=>orderAPI.getAllOrders(currentPage-1,10,currentStatus));const orders=response===null||response===void 0?void 0:response.data;const totalPages=(response===null||response===void 0?void 0:response.totalPages)||0;const handlePageChange=page=>{setSearchParams({page:page.toString(),...(currentStatus&&{status:currentStatus})});};const handleStatusChange=e=>{const status=e.target.value;setSearchParams({page:'1',...(status&&{status})});};if(isLoading)return/*#__PURE__*/_jsx(Loading,{text:\"\\u0110ang t\\u1EA3i danh s\\xE1ch \\u0111\\u01A1n h\\xE0ng...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500\",children:[\"L\\u1ED7i khi t\\u1EA3i \\u0111\\u01A1n h\\xE0ng: \",error.message]});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"Qu\\u1EA3n L\\xFD \\u0110\\u01A1n H\\xE0ng\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status-filter\",className:\"mr-2 font-medium\",children:\"L\\u1ECDc theo tr\\u1EA1ng th\\xE1i:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"status-filter\",value:currentStatus||'',onChange:handleStatusChange,className:\"border-gray-300 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3\"}),ORDER_STATUSES.map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:status},status))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"M\\xE3 \\u0110\\u01A1n H\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"Kh\\xE1ch H\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"Ng\\xE0y \\u0110\\u1EB7t\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-right\",children:\"T\\u1ED5ng Ti\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Tr\\u1EA1ng Th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-right\",children:\"Chi Ti\\u1EBFt\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:orders===null||orders===void 0?void 0:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-6 font-mono text-sm\",children:order._id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-6\",children:order.customerName}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-6\",children:new Date(order.createdAt).toLocaleDateString('vi-VN')}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-4 px-6 text-right\",children:[order.totalAmount.toLocaleString('vi-VN'),\" \\u20AB\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-6 text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs font-semibold rounded-full ${getStatusClassName(order.status)}`,children:order.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-4 px-6 text-right\",children:/*#__PURE__*/_jsx(Link,{to:`/admin/orders/${order._id}`,className:\"text-indigo-600 hover:text-indigo-900 font-medium\",children:\"Xem\"})})]},order._id))})]})}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-center\",children:/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:handlePageChange})})]});};export default AdminOrderManagement;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
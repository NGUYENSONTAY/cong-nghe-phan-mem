{"ast":null,"code":"import React,{useEffect}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{useAuth}from'../../contexts/AuthContext';import{userAPI}from'../../api/userAPI';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const schema=yup.object({name:yup.string().required('Họ và tên là bắt buộc'),phone:yup.string().test('is-valid-phone','Số điện thoại không hợp lệ',value=>!value||/^(0[3|5|7|8|9])+([0-9]{8})\\b/.test(value)).optional().default(''),address:yup.string().optional().default('')}).required();const UpdateProfileForm=()=>{const{user,updateUser}=useAuth();const{register,handleSubmit,reset,formState:{errors,isSubmitting}}=useForm({resolver:yupResolver(schema)});useEffect(()=>{if(user){reset({name:user.name||'',phone:user.phone||'',address:user.address||''});}},[user,reset]);const onSubmit=async data=>{try{const updatedUser=await userAPI.updateProfile(data);updateUser(updatedUser);toast.success('Cập nhật thông tin thành công!');}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Có lỗi xảy ra khi cập nhật.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Th\\xF4ng tin c\\xE1 nh\\xE2n\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"H\\u1ECD v\\xE0 t\\xEAn\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('name'),className:`input input-bordered ${errors.name?'input-error':''}`}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.name.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",...register('phone'),className:`input input-bordered ${errors.phone?'input-error':''}`}),errors.phone&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.phone.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"})}),/*#__PURE__*/_jsx(\"textarea\",{...register('address'),className:`textarea textarea-bordered ${errors.address?'textarea-error':''}`}),errors.address&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.address.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control pt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Đang lưu...':'Lưu thay đổi'})})]})]});};export default UpdateProfileForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
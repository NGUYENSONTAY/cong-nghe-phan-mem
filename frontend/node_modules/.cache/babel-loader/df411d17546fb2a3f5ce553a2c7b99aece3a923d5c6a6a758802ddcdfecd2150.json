{"ast":null,"code":"var _jsxFileName = \"/home/diengb/bansach/bookstore/frontend/src/pages/admin/EditBook.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport toast from 'react-hot-toast';\nimport { booksAPI } from '../../api/booksAPI';\nimport BookForm from '../../components/admin/BookForm';\nimport Loading from '../../components/common/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditBook = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  // Fetch the book data\n  const {\n    data: book,\n    isLoading: isLoadingBook,\n    error\n  } = useQuery(['book', id], () => booksAPI.getBookById(id), {\n    enabled: !!id // Only run the query if id is present\n  });\n\n  // Setup mutation for updating the book\n  const {\n    mutateAsync,\n    isLoading: isUpdating\n  } = useMutation(data => booksAPI.updateBook(id, data), {\n    onSuccess: () => {\n      queryClient.invalidateQueries('adminBooks');\n      queryClient.invalidateQueries(['book', id]);\n      toast.success('Cập nhật sách thành công!');\n      navigate('/admin/books');\n    },\n    onError: error => {\n      toast.error(`Lỗi khi cập nhật sách: ${error.message}`);\n    }\n  });\n  const handleUpdateBook = async data => {\n    await mutateAsync(data);\n  };\n  if (isLoadingBook) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 29\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-red-500\",\n    children: [\"L\\u1ED7i khi t\\u1EA3i d\\u1EEF li\\u1EC7u s\\xE1ch: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 21\n  }, this);\n  if (!book) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Kh\\xF4ng t\\xECm th\\u1EA5y s\\xE1ch.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/books\",\n        className: \"text-indigo-600 hover:text-indigo-900\",\n        children: \"\\u2190 Quay l\\u1EA1i danh s\\xE1ch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-800 mt-2\",\n        children: \"Ch\\u1EC9nh S\\u1EEDa S\\xE1ch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookForm, {\n      onSubmit: handleUpdateBook,\n      isSubmitting: isUpdating,\n      initialData: book,\n      submitButtonText: \"C\\u1EADp Nh\\u1EADt\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(EditBook, \"v73Xgh7ce9kaL0ba8yYB0X9O5ao=\", false, function () {\n  return [useParams, useNavigate, useQueryClient, useQuery, useMutation];\n});\n_c = EditBook;\nexport default EditBook;\nvar _c;\n$RefreshReg$(_c, \"EditBook\");","map":{"version":3,"names":["React","useParams","useNavigate","Link","useQuery","useMutation","useQueryClient","toast","booksAPI","BookForm","Loading","jsxDEV","_jsxDEV","EditBook","_s","id","navigate","queryClient","data","book","isLoading","isLoadingBook","error","getBookById","enabled","mutateAsync","isUpdating","updateBook","onSuccess","invalidateQueries","success","onError","message","handleUpdateBook","fileName","_jsxFileName","lineNumber","columnNumber","className","children","to","onSubmit","isSubmitting","initialData","submitButtonText","_c","$RefreshReg$"],"sources":["/home/diengb/bansach/bookstore/frontend/src/pages/admin/EditBook.tsx"],"sourcesContent":["import React from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport toast from 'react-hot-toast';\nimport { booksAPI } from '../../api/booksAPI';\nimport BookForm, { BookFormData } from '../../components/admin/BookForm';\nimport Loading from '../../components/common/Loading';\n\nconst EditBook = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  // Fetch the book data\n  const { data: book, isLoading: isLoadingBook, error } = useQuery(\n    ['book', id],\n    () => booksAPI.getBookById(id!),\n    {\n      enabled: !!id, // Only run the query if id is present\n    }\n  );\n\n  // Setup mutation for updating the book\n  const { mutateAsync, isLoading: isUpdating } = useMutation(\n    (data: BookFormData) => booksAPI.updateBook(id!, data),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries('adminBooks');\n        queryClient.invalidateQueries(['book', id]);\n        toast.success('Cập nhật sách thành công!');\n        navigate('/admin/books');\n      },\n      onError: (error: Error) => {\n        toast.error(`Lỗi khi cập nhật sách: ${error.message}`);\n      },\n    }\n  );\n\n  const handleUpdateBook = async (data: BookFormData) => {\n    await mutateAsync(data);\n  };\n\n  if (isLoadingBook) return <Loading />;\n  if (error) return <p className=\"text-red-500\">Lỗi khi tải dữ liệu sách: {(error as Error).message}</p>;\n  if (!book) return <p>Không tìm thấy sách.</p>;\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <Link to=\"/admin/books\" className=\"text-indigo-600 hover:text-indigo-900\">\n          &larr; Quay lại danh sách\n        </Link>\n        <h1 className=\"text-3xl font-bold text-gray-800 mt-2\">Chỉnh Sửa Sách</h1>\n      </div>\n      <BookForm\n        onSubmit={handleUpdateBook}\n        isSubmitting={isUpdating}\n        initialData={book}\n        submitButtonText=\"Cập Nhật\"\n      />\n    </div>\n  );\n};\n\nexport default EditBook; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
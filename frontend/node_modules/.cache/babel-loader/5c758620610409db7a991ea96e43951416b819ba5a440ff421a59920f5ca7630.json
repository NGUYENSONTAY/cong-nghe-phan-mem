{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nfunction useLocalStorage(key, initialValue) {\n  _s();\n  const [storedValue, setStoredValue] = useState(() => {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n  const setValue = value => {\n    try {\n      // Allow value to be a function so we have the same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // This useEffect is to sync tabs\n  useEffect(() => {\n    const handleStorageChange = e => {\n      if (e.key === key) {\n        try {\n          setStoredValue(e.newValue ? JSON.parse(e.newValue) : initialValue);\n        } catch (error) {\n          console.error(error);\n          setStoredValue(initialValue);\n        }\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [initialValue, key]);\n  return [storedValue, setValue];\n}\n_s(useLocalStorage, \"POGk+dcNE/SWMN4zNkONnid0waE=\");\nexport default useLocalStorage;","map":{"version":3,"names":["useState","useEffect","useLocalStorage","key","initialValue","_s","storedValue","setStoredValue","window","item","localStorage","getItem","JSON","parse","error","console","setValue","value","valueToStore","Function","setItem","stringify","handleStorageChange","e","newValue","addEventListener","removeEventListener"],"sources":["/home/diengb/bansach/bookstore/frontend/src/hooks/useLocalStorage.ts"],"sourcesContent":["import { useState, useEffect, Dispatch, SetStateAction } from 'react';\n\nfunction useLocalStorage<T>(key: string, initialValue: T): [T, Dispatch<SetStateAction<T>>] {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  const setValue: Dispatch<SetStateAction<T>> = (value) => {\n    try {\n      // Allow value to be a function so we have the same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // This useEffect is to sync tabs\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === key) {\n        try {\n          setStoredValue(e.newValue ? JSON.parse(e.newValue) : initialValue);\n        } catch (error) {\n            console.error(error);\n            setStoredValue(initialValue);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [initialValue, key]);\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage; "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAkC,OAAO;AAErE,SAASC,eAAeA,CAAIC,GAAW,EAAEC,YAAe,EAAoC;EAAAC,EAAA;EAC1F,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAI,MAAM;IACtD,IAAI,OAAOQ,MAAM,KAAK,WAAW,EAAE;MACjC,OAAOJ,YAAY;IACrB;IACA,IAAI;MACF,MAAMK,IAAI,GAAGD,MAAM,CAACE,YAAY,CAACC,OAAO,CAACR,GAAG,CAAC;MAC7C,OAAOM,IAAI,GAAGG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC,GAAGL,YAAY;IAC/C,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,OAAOV,YAAY;IACrB;EACF,CAAC,CAAC;EAEF,MAAMY,QAAqC,GAAIC,KAAK,IAAK;IACvD,IAAI;MACF;MACA,MAAMC,YAAY,GAAGD,KAAK,YAAYE,QAAQ,GAAGF,KAAK,CAACX,WAAW,CAAC,GAAGW,KAAK;MAC3EV,cAAc,CAACW,YAAY,CAAC;MAC5B,IAAI,OAAOV,MAAM,KAAK,WAAW,EAAE;QACjCA,MAAM,CAACE,YAAY,CAACU,OAAO,CAACjB,GAAG,EAAES,IAAI,CAACS,SAAS,CAACH,YAAY,CAAC,CAAC;MAChE;IACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;;EAED;EACAb,SAAS,CAAC,MAAM;IACd,MAAMqB,mBAAmB,GAAIC,CAAe,IAAK;MAC/C,IAAIA,CAAC,CAACpB,GAAG,KAAKA,GAAG,EAAE;QACjB,IAAI;UACFI,cAAc,CAACgB,CAAC,CAACC,QAAQ,GAAGZ,IAAI,CAACC,KAAK,CAACU,CAAC,CAACC,QAAQ,CAAC,GAAGpB,YAAY,CAAC;QACpE,CAAC,CAAC,OAAOU,KAAK,EAAE;UACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;UACpBP,cAAc,CAACH,YAAY,CAAC;QAChC;MACF;IACF,CAAC;IAEDI,MAAM,CAACiB,gBAAgB,CAAC,SAAS,EAAEH,mBAAmB,CAAC;IAEvD,OAAO,MAAM;MACXd,MAAM,CAACkB,mBAAmB,CAAC,SAAS,EAAEJ,mBAAmB,CAAC;IAC5D,CAAC;EACH,CAAC,EAAE,CAAClB,YAAY,EAAED,GAAG,CAAC,CAAC;EAEvB,OAAO,CAACG,WAAW,EAAEU,QAAQ,CAAC;AAChC;AAACX,EAAA,CAhDQH,eAAe;AAkDxB,eAAeA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
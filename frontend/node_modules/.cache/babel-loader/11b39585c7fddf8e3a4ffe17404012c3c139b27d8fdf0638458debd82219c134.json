{"ast":null,"code":"import React,{useEffect}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';// Vì RegisterRequest không có confirmPassword, chúng ta sẽ tạo một type mới cho form\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const schema=yup.object().shape({firstName:yup.string().required('Họ là bắt buộc'),lastName:yup.string().required('Tên là bắt buộc'),username:yup.string().required('Tên đăng nhập là bắt buộc').min(3,'Tên đăng nhập phải có ít nhất 3 ký tự'),email:yup.string().email('Email không hợp lệ').required('Email là bắt buộc'),password:yup.string().required('Mật khẩu là bắt buộc').min(6,'Mật khẩu phải có ít nhất 6 ký tự'),confirmPassword:yup.string().oneOf([yup.ref('password'),undefined],'Mật khẩu không khớp').required('Vui lòng xác nhận mật khẩu')});const RegisterPage=()=>{const{register:registerUser,isAuthenticated,isLoading}=useAuth();const navigate=useNavigate();const{register,handleSubmit,formState:{errors,isSubmitting}}=useForm({resolver:yupResolver(schema)});useEffect(()=>{if(isAuthenticated){navigate('/');}},[isAuthenticated,navigate]);const onSubmit=async data=>{try{// Loại bỏ confirmPassword trước khi gửi đi\nconst{confirmPassword,...registerData}=data;await registerUser(registerData);navigate('/login');}catch(error){console.error(\"Registration failed:\",error);// Toast error đã được xử lý trong AuthContext\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"hero min-h-screen bg-base-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content flex-col w-full max-w-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold\",children:\"T\\u1EA1o t\\xE0i kho\\u1EA3n m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"py-6\",children:\"Tham gia c\\u1ED9ng \\u0111\\u1ED3ng y\\xEAu s\\xE1ch c\\u1EE7a ch\\xFAng t\\xF4i ngay h\\xF4m nay!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card shrink-0 w-full shadow-2xl bg-base-100\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"H\\u1ECD\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"H\\u1ECD\",className:`input input-bordered ${errors.firstName?'input-error':''}`,...register('firstName')}),errors.firstName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.firstName.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"T\\xEAn\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xEAn\",className:`input input-bordered ${errors.lastName?'input-error':''}`,...register('lastName')}),errors.lastName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.lastName.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",className:`input input-bordered ${errors.username?'input-error':''}`,...register('username')}),errors.username&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.username.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email@example.com\",className:`input input-bordered ${errors.email?'input-error':''}`,...register('email')}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"M\\u1EADt kh\\u1EA9u\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"m\\u1EADt kh\\u1EA9u\",className:`input input-bordered ${errors.password?'input-error':''}`,...register('password')}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.password.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"x\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",className:`input input-bordered ${errors.confirmPassword?'input-error':''}`,...register('confirmPassword')}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:errors.confirmPassword.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control mt-6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting||isLoading,children:isSubmitting||isLoading?'Đang xử lý...':'Đăng ký'})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0110\\xE3 c\\xF3 t\\xE0i kho\\u1EA3n?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"link link-primary\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})]})})]})})]})});};export default RegisterPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}